(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{416:function(t,s,a){"use strict";a.r(s);var n=a(55),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"ci-cd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ci-cd"}},[t._v("#")]),t._v(" CI/CD")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#前言"}},[t._v("前言")])]),a("li",[a("a",{attrs:{href:"#什么是ci"}},[t._v("什么是CI?")]),a("ul",[a("li",[a("a",{attrs:{href:"#ci有什么特点"}},[t._v("CI有什么特点？")])])])]),a("li",[a("a",{attrs:{href:"#什么是cd"}},[t._v("什么是CD？")]),a("ul",[a("li",[a("a",{attrs:{href:"#cd有什么特点"}},[t._v("CD有什么特点？")])])])]),a("li",[a("a",{attrs:{href:"#自动化部署工具"}},[t._v("自动化部署工具")])]),a("li",[a("a",{attrs:{href:"#github-actions介绍"}},[t._v("GitHub Actions介绍")])]),a("li",[a("a",{attrs:{href:"#github-actions-配置步骤"}},[t._v("GitHub Actions 配置步骤")]),a("ul",[a("li",[a("a",{attrs:{href:"#一、获取token"}},[t._v("一、获取token")])]),a("li",[a("a",{attrs:{href:"#二、为指定仓库授权"}},[t._v("二、为指定仓库授权")])]),a("li",[a("a",{attrs:{href:"#三、-项目根目录创建yml文件"}},[t._v("三、 项目根目录创建Yml文件")])])])]),a("li",[a("a",{attrs:{href:"#如何配置yml文件"}},[t._v("如何配置yml文件？")]),a("ul",[a("li",[a("a",{attrs:{href:"#基本概念"}},[t._v("基本概念")])]),a("li",[a("a",{attrs:{href:"#如何定义workflow"}},[t._v("如何定义workflow")])]),a("li",[a("a",{attrs:{href:"#如何定义workflow的触发器"}},[t._v("如何定义workflow的触发器")])]),a("li",[a("a",{attrs:{href:"#如何定义一个job"}},[t._v("如何定义一个job?")])]),a("li",[a("a",{attrs:{href:"#如何定义job的依赖-job是否可以依赖于别的job的输出"}},[t._v("如何定义job的依赖？job是否可以依赖于别的job的输出？")])]),a("li",[a("a",{attrs:{href:"#如何定义-job-的运行环境"}},[t._v("如何定义 job 的运行环境?")])]),a("li",[a("a",{attrs:{href:"#如何定义-step"}},[t._v("如何定义 step")])]),a("li",[a("a",{attrs:{href:"#如何定义action"}},[t._v("如何定义action")])]),a("li",[a("a",{attrs:{href:"#怎么在命令行运行yml中的某一step"}},[t._v("怎么在命令行运行yml中的某一step")])])])]),a("li",[a("a",{attrs:{href:"#业内常用的workflow"}},[t._v("业内常用的workflow")]),a("ul",[a("li",[a("a",{attrs:{href:"#打版本标签-create-tag-release"}},[t._v("打版本标签 Create Tag Release")])]),a("li",[a("a",{attrs:{href:"#创建-github-page-站点"}},[t._v("创建 Github Page 站点")])]),a("li",[a("a",{attrs:{href:"#本博客配置的push自动部署静态资源"}},[t._v("本博客配置的push自动部署静态资源")])]),a("li",[a("a",{attrs:{href:"#多人协作开发-云端代码检测"}},[t._v("多人协作开发，云端代码检测")])])])]),a("li",[a("a",{attrs:{href:"#总结"}},[t._v("总结")])]),a("li",[a("a",{attrs:{href:"#参考文章"}},[t._v("参考文章")])])])]),a("p"),t._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("在开发过程中，如果项目采用的是CI/CD模式，那么需要开发者频繁的提交代码，合并到主干分支上。并将项目打包部署到服务器上，交付给"),a("strong",[t._v("质量团队")]),t._v("或者 "),a("strong",[t._v("用户")]),t._v("。在通过评审之后，他们将部署到生产环境。但由于编码、构建、集成、测试、交付、部署这些机械性的操作，需要团队持续不断地重复去实行，需要人力及时间成本，因此 "),a("strong",[t._v("自动化部署工具")]),t._v(" 便问世了。")]),t._v(" "),a("h2",{attrs:{id:"什么是ci"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是ci"}},[t._v("#")]),t._v(" 什么是CI?")]),t._v(" "),a("p",[t._v("Continuous Integration(CI)----持续集成，是一个开发行为，它要求开发者每天多次将代码集成到一个共享的仓库，每次提交都会被自动构建所检查，团队可因此提前检测出问题。")]),t._v(" "),a("h3",{attrs:{id:"ci有什么特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ci有什么特点"}},[t._v("#")]),t._v(" CI有什么特点？")]),t._v(" "),a("ul",[a("li",[t._v("快速发现错误。每完成一点更新，就集成到主干，可以快速发现错误，定位错误也比较容易；")]),t._v(" "),a("li",[t._v("防止分支大幅偏离主干。如果不是经常集成，主干又在不断更新，会导致以后集成的难度变大，甚至难以集成。")])]),t._v(" "),a("h2",{attrs:{id:"什么是cd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是cd"}},[t._v("#")]),t._v(" 什么是CD？")]),t._v(" "),a("ol",[a("li",[t._v("Continuous deployment (CD)----持续部署。通过自动化部署的手段将软件功能频繁的进行交付。")]),t._v(" "),a("li",[t._v("Continuous Delivery(CD)----持续交付。指频繁地将软件的新版本，交付给质量团队或者用户，以供评审。如果评审通过，代码就进入生产阶段。")])]),t._v(" "),a("h3",{attrs:{id:"cd有什么特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cd有什么特点"}},[t._v("#")]),t._v(" CD有什么特点？")]),t._v(" "),a("ul",[a("li",[t._v("代码通过评审以后，自动部署到生产环境。")]),t._v(" "),a("li",[t._v("代码在任何时刻都是可部署的，可以进入生产阶段。")])]),t._v(" "),a("h2",{attrs:{id:"自动化部署工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动化部署工具"}},[t._v("#")]),t._v(" 自动化部署工具")]),t._v(" "),a("p",[t._v("自动化部署工具简单来说，就是将繁杂的步骤写在一个文件中，只要配置好 指定分支、代码环境、目标地址等信息，再配置好哪些"),a("strong",[t._v("操作")]),t._v("会触发自动部署即可。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("读者可以按照个人喜好选择部署工具。\n"),a("a",{attrs:{href:"https://dzone.com/articles/21-automated-deployment-tools-you-should-know",target:"_blank",rel:"noopener noreferrer"}},[t._v("21种常用自动化部署工具介绍"),a("OutboundLink")],1),t._v("。")])]),t._v(" "),a("h2",{attrs:{id:"github-actions介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github-actions介绍"}},[t._v("#")]),t._v(" GitHub Actions介绍")]),t._v(" "),a("p",[t._v("上述说明，持续集成由很多操作组成，比如拉取最新代码、运行测试、登录服务器、部署服务器等，GitHub 把这些操作统一称为 "),a("strong",[t._v("Actions")]),t._v(" ，并推出持续集成工具 ---- GitHub Actions。")]),t._v(" "),a("h2",{attrs:{id:"github-actions-配置步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github-actions-配置步骤"}},[t._v("#")]),t._v(" GitHub Actions 配置步骤")]),t._v(" "),a("h3",{attrs:{id:"一、获取token"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、获取token"}},[t._v("#")]),t._v(" 一、获取token")]),t._v(" "),a("ul",[a("li",[t._v("进入GitHub")]),t._v(" "),a("li",[t._v("->Settings")]),t._v(" "),a("li",[t._v("->Developer Settings")]),t._v(" "),a("li",[t._v("->Personal access tokens")]),t._v(" "),a("li",[t._v("申请"),a("code",[t._v("token")]),t._v("名字建议写成 "),a("code",[t._v("ACCESS_TOKEN")])]),t._v(" "),a("li",[t._v("勾选"),a("strong",[t._v("workflow")]),t._v(",勾选"),a("strong",[t._v("repo下的所有项")]),t._v("，以及"),a("strong",[t._v("user下的所有项")]),t._v("，生成一个token,复制token值。")])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("注意：token在生成之后的那个页面可以看到。如果重新进入，或以后进入，则无法查看，只能通过再生成。")])]),t._v(" "),a("h3",{attrs:{id:"二、为指定仓库授权"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、为指定仓库授权"}},[t._v("#")]),t._v(" 二、为指定仓库授权")]),t._v(" "),a("p",[t._v("将上一步生成的"),a("code",[t._v("ACCESS_TOKEN")]),t._v(",设置在"),a("strong",[t._v("指定仓库")]),t._v("的"),a("code",[t._v("Secrets")]),t._v("里，便能在脚本文件中使用。"),a("strong",[t._v("目的")]),t._v("是为了拥有访问权限。")]),t._v(" "),a("ol",[a("li",[t._v("登录GitHub")]),t._v(" "),a("li",[t._v("点击进入需要"),a("strong",[t._v("自动部署")]),t._v("的仓库")]),t._v(" "),a("li",[t._v("在setting中找到"),a("strong",[t._v("Secrets")])]),t._v(" "),a("li",[t._v("点击"),a("strong",[t._v("Secrets")]),t._v("子菜单下的"),a("strong",[t._v("Actions")])]),t._v(" "),a("li",[t._v("在页面右侧点击"),a("strong",[t._v("New repository secret")])]),t._v(" "),a("li",[a("code",[t._v("note")]),t._v("名也设置为"),a("code",[t._v("ACCESS_TOKEN")]),t._v("，将"),a("code",[t._v("Personal access tokens")]),t._v("的"),a("code",[t._v("ACCESS_TOKEN")]),t._v("生成值放入。")])]),t._v(" "),a("h3",{attrs:{id:"三、-项目根目录创建yml文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、-项目根目录创建yml文件"}},[t._v("#")]),t._v(" 三、 项目根目录创建Yml文件")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("Yml是什么？\n我们集成 Github Action 的做法，就是在我们仓库的根目录下，创建一个 .github 文件夹，里面放一个 "),a("code",[t._v("*.yml")]),t._v(" 文件——这个 Yml 文件就是我们配置 Github Action 所用的文件。\n它是一个非常容易地脚本语言，如果我们不会的话，也没啥大事继续往下看就成了。")]),t._v(" "),a("p",[t._v("参考文档："),a("a",{attrs:{href:"https://link.zhihu.com/?target=https%3A//www.codeproject.com/Articles/1214409/Learn-YAML-in-five-minutes",target:"_blank",rel:"noopener noreferrer"}},[t._v("五分钟学习 YML"),a("OutboundLink")],1)])]),t._v(" "),a("h4",{attrs:{id:"github仓库自动创建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github仓库自动创建"}},[t._v("#")]),t._v(" github仓库自动创建")]),t._v(" "),a("ul",[a("li",[t._v("进入github指定仓库页面")]),t._v(" "),a("li",[t._v("点击actions")]),t._v(" "),a("li",[t._v("选择基于项目的环境")]),t._v(" "),a("li",[t._v("github会在你的项目根目录下创建.github/workflows/xxx.yml")]),t._v(" "),a("li",[t._v("点击"),a("code",[t._v("change")]),t._v("将会提交到分支上。")])]),t._v(" "),a("h4",{attrs:{id:"手动创建yml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#手动创建yml"}},[t._v("#")]),t._v(" 手动创建yml")]),t._v(" "),a("ul",[a("li",[t._v("在项目的根目录创建"),a("code",[t._v(".github")]),t._v("目录")]),t._v(" "),a("li",[t._v("在"),a("code",[t._v(".github")]),t._v("目录下创建"),a("code",[t._v("workflows")]),t._v("目录")]),t._v(" "),a("li",[t._v("在"),a("code",[t._v("workflows")]),t._v("目录下创建需要执行的"),a("strong",[t._v("自动部署")]),t._v("yml文件")])]),t._v(" "),a("h2",{attrs:{id:"如何配置yml文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何配置yml文件"}},[t._v("#")]),t._v(" 如何配置yml文件？")]),t._v(" "),a("p",[t._v("在配置yml文件之前，先了解一些"),a("strong",[t._v("基本概念")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"基本概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本概念"}},[t._v("#")]),t._v(" 基本概念")]),t._v(" "),a("ul",[a("li",[t._v("一个yml文件由workflow、job、step、action四部分组成。")]),t._v(" "),a("li",[t._v("workflow(工作流程)：持续集成一次运行的过程，就是一个 workflow。")]),t._v(" "),a("li",[t._v("job(任务)：一个 workflow 由一个或者多个 jobs 构成，含义是一次持续集成的运行，可以完成多个任务。")]),t._v(" "),a("li",[t._v("step(步骤)：每个 job 由多个 step 构成，一步步完成。")]),t._v(" "),a("li",[t._v("action(动作)：每个 step 可以依次执行一个或者多个命令。")]),t._v(" "),a("li",[t._v("每个job的当前行首字母需要对齐, step 和 action 也是。否则会报"),a("code",[t._v("syntax")]),t._v("语法错误。")])]),t._v(" "),a("h3",{attrs:{id:"如何定义workflow"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何定义workflow"}},[t._v("#")]),t._v(" 如何定义workflow")]),t._v(" "),a("p",[t._v("Workflow 的名称，Github 在存储库的 Action 页面上显示 Workflow 的名称。\n如果我们省略 name，则 Github 会将其设置为相对于存储库根目录的工作流文件路径。")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Greeting from Mona\n")])])]),a("h3",{attrs:{id:"如何定义workflow的触发器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何定义workflow的触发器"}},[t._v("#")]),t._v(" 如何定义workflow的触发器")]),t._v(" "),a("p",[t._v("触发 Workflow 执行的 event 名称，比如：每当我提交代码到 Github 上的时候，或者是每当我打 TAG 的时候。")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[t._v("// 单个事件\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" push\n\n// 多个事件\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("push"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("pull_request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h3",{attrs:{id:"如何定义一个job"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何定义一个job"}},[t._v("#")]),t._v(" 如何定义一个job?")]),t._v(" "),a("ul",[a("li",[t._v("每个 job 必须具有一个 id 与之关联。")]),t._v(" "),a("li",[t._v("以下的"),a("code",[t._v("my_first_job")]),t._v("和"),a("code",[t._v("my_second_job")]),t._v("就是"),a("code",[t._v("job_id")])]),t._v(" "),a("li",[t._v("配置的name将会显示在Github上")])]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("my_first_job")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" My first job\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("my_second_job")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" My second job\n")])])]),a("h3",{attrs:{id:"如何定义job的依赖-job是否可以依赖于别的job的输出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何定义job的依赖-job是否可以依赖于别的job的输出"}},[t._v("#")]),t._v(" 如何定义job的依赖？job是否可以依赖于别的job的输出？")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("jobs.<job_id>.needs")])]),t._v(" "),a("li",[t._v("needs可以表示job是否依赖于别的job-如果job失败，则会跳过所有需要该job的job。")])]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("job1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("job2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("needs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" job1\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("job3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("needs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("job1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" job2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h3",{attrs:{id:"如何定义-job-的运行环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何定义-job-的运行环境"}},[t._v("#")]),t._v(" 如何定义 job 的运行环境?")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("job.<job_id>.runs-on")])]),t._v(" "),a("li",[t._v("指定运行job的"),a("strong",[t._v("虚拟机系统")])]),t._v(" "),a("li",[t._v("Github上可用的系统有:\n- windows-2019\n- ubuntu-20.04\n- ubuntu-18.04\n- ubuntu-16.04\n- macos-10.15")])]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("job1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" macos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.15")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("job2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" windows"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("\n")])])]),a("h3",{attrs:{id:"如何定义-step"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何定义-step"}},[t._v("#")]),t._v(" 如何定义 step")]),t._v(" "),a("ol",[a("li",[t._v("commands: 命令行命令")]),t._v(" "),a("li",[t._v("setup tasks: 环境配置命令 （比如安装个Node环境、安装个Python环境）")]),t._v(" "),a("li",[t._v("action: 执行动作")])]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义 Workflow 的名字")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Greeting from Mona\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义 Workflow 的触发器")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" push\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义 Workflow 的 job")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义 job 的 id")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("my-job")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义 job 的 name")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" My Job\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义 job 的运行环境")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义 job 的运行步骤")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义 step 的名称")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Print a greeting\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义 step 的环境变量")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MY_VAR")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Hi there"),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("!")]),t._v(" My name is\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("FIRST_NAME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Mona\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MIDDLE_NAME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" The\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("LAST_NAME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Octocat\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 运行指令：输出环境变量")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n        echo $MY_VAR $FIRST_NAME $MIDDLE_NAME $LAST_NAME.")]),t._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("每个 step 都在自己的运行器环境中运行，并且可以访问工作空间和文件系统。因此， "),a("strong",[t._v("step 之间不会保留对环境变量的更改")]),t._v("。")])]),t._v(" "),a("h3",{attrs:{id:"如何定义action"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何定义action"}},[t._v("#")]),t._v(" 如何定义action")]),t._v(" "),a("ul",[a("li",[t._v("每一个"),a("code",[t._v("-")]),t._v("后面跟的语句表示一个"),a("code",[t._v("action")])]),t._v(" "),a("li",[t._v("每一个"),a("code",[t._v("action")]),t._v("都有独立的"),a("code",[t._v("name")])]),t._v(" "),a("li",[t._v("每一个"),a("code",[t._v("action")]),t._v("可以多次"),a("code",[t._v("uses")]),t._v("安装各种包")])]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 安装node\n   "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/setup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node@v2\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Check out Git repository\n   "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n")])])]),a("h3",{attrs:{id:"怎么在命令行运行yml中的某一step"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#怎么在命令行运行yml中的某一step"}},[t._v("#")]),t._v(" 怎么在命令行运行yml中的某一step")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[t._v("jobs.<job_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(".steps.run\n")])])]),a("h2",{attrs:{id:"业内常用的workflow"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#业内常用的workflow"}},[t._v("#")]),t._v(" 业内常用的workflow")]),t._v(" "),a("h3",{attrs:{id:"打版本标签-create-tag-release"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打版本标签-create-tag-release"}},[t._v("#")]),t._v(" 打版本标签 Create Tag Release")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Sequence of patterns matched against refs/tags")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("tags")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'v*'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Push events to matching v*, i.e. v1.0, v20.15.10")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Create Release\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Create Release\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Checkout code\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@master\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Create Release\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" create_release\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/create"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("release@latest\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("GITHUB_TOKEN")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.GITHUB_TOKEN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This token is provided by Actions, you do not need to create your own token")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("tag_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" github.ref "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("release_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Release $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" github.ref "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n            Changes in this Release\n            - First Change\n            - Second Change")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("draft")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("prerelease")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n\n")])])]),a("h3",{attrs:{id:"创建-github-page-站点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-github-page-站点"}},[t._v("#")]),t._v(" 创建 Github Page 站点")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" github pages\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" master "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default branch")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("deploy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18.04")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm install\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm run docs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("build\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" peaceiris/actions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("gh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages@v3\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("github_token")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.GITHUB_TOKEN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("publish_dir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./docs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("dist\n\n")])])]),a("h3",{attrs:{id:"本博客配置的push自动部署静态资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本博客配置的push自动部署静态资源"}},[t._v("#")]),t._v(" 本博客配置的push自动部署静态资源")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# name 可以自定义")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy GitHub Pages\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 触发条件：在 push 到 main/master 分支后，新的 Github 项目 应该都是 main，而之前的项目一般都是 master")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" master\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 任务")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build-and-deploy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 服务器环境：18.04版 Ubuntu")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18.04")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 载入node环境")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" load node\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/setup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node@v1\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node-version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"14.x"')]),t._v("\n           \n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 拉取代码")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Checkout\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("persist-credentials")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n      \n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成静态文件")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Build\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm install "),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("&&")]),t._v(" npm run build\n\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 部署到 GitHub Pages")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" JamesIves/github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action@releases/v3\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ACCESS_TOKEN")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.ACCESS_TOKEN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 也就是我们刚才生成的 secret")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("BRANCH")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" gh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 部署到 gh-pages 分支，因为 main 分支存放的一般是源码，而 gh-pages 分支则用来存放生成的静态文件")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("FOLDER")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" docs/.vuepress/dist "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vuepress 生成的静态文件存放的地方")]),t._v("\n\n")])])]),a("h3",{attrs:{id:"多人协作开发-云端代码检测"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多人协作开发-云端代码检测"}},[t._v("#")]),t._v(" 多人协作开发，云端代码检测")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Test\n    \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("push"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pull_request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("lint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/setup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node@v1\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node-version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'12.x'")]),t._v("\n    \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Install dependencies\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bahmutov/npm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("install@v1\n    \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Run linter\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm run lint\n    \n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/setup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node@v1\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node-version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'12.x'")]),t._v("\n    \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Install dependencies\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bahmutov/npm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("install@v1\n    \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Run test\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm test\n    \n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/setup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node@v1\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node-version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'12.x'")]),t._v("\n    \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Install dependencies\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bahmutov/npm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("install@v1\n    \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Build\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm run build\n\n")])])]),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("ol",[a("li",[t._v("CI/CD是一种项目开发模式，它持续地将各分支集成到主干。再持续部署到服务器上，交付给质量团队或用户。")]),t._v(" "),a("li",[t._v("自动化部署工具的出现，节省了团队的时间精力，它将编码、构建、集成、测试、交付、部署等一系列操作都"),a("strong",[t._v("自动化")]),t._v("。")]),t._v(" "),a("li",[t._v("Github Actions 就是一款自动化部署工具。只要在项目根目录创建"),a("code",[t._v(".github/workflows/xxx.yml")]),t._v("，在yml配置流程。即可在特定操作（比如push）中触发。完成一系列"),a("strong",[t._v("自动化")]),t._v("操作。")])]),t._v(" "),a("h2",{attrs:{id:"参考文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/164744104",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub Actions的使用@知乎"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.cn/post/6950799922178310152#heading-1",target:"_blank",rel:"noopener noreferrer"}},[t._v("手把手教会GitHub Actions@掘金"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://link.zhihu.com/?target=https%3A//www.codeproject.com/Articles/1214409/Learn-YAML-in-five-minutes",target:"_blank",rel:"noopener noreferrer"}},[t._v("五分钟学习 YAML"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);